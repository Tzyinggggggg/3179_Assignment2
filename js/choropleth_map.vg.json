{
	"$schema": "https://vega.github.io/schema/vega-lite/v5.json",
	"width": 955,
	"height": 500,
	"padding": { "left": 10 },
	"params": [
		{
			"name": "zoom_level",
			"value": 200,
			"bind": {
				"input": "range",
				"min": 150,
				"max": 300,
				"step": 50,
				"name": "Zoom: "
			}
		},
		{
			"name": "center_to",
			"value": [0, 0],
			"bind": {
				"input": "select",
				"options": [
					[0, 0],
					[81, 144],
					[-60, -22],
					[9, 1],
					[130, -30],
					[-90, 120]
				],
				"labels": [
					"Whole map",
					"Asia & Europe",
					"South America",
					"Africa",
					"Asia Pacific",
					"North America"
				],
				"name": "Map Centre: "
			}
		}
	],
	"projection": {
		"type": "equalEarth",
		"scale": { "expr": "zoom_level" },
		"rotate": [-20, 0, 0],
		"center": { "expr": "center_to" }
	},
	"layer": [
		{
			"transform": [
				{
					"calculate": "'Data is not available in ' + datum.properties.NAME",
					"as": "note"
				}
			],

			"mark": { "type": "geoshape", "fill": "lightgray", "stroke": "white" },
			"encoding": {
				"tooltip": { "field": "note" }
			}
		},
		{
			"data": {
				"url": "https://raw.githubusercontent.com/KaneSec/vega_lite/main/2_symbol_map/js/ne_110m_admin_0_countries.topojson",
				"format": { "type": "topojson", "feature": "ne_110m_admin_0_countries" }
			},
			"mark": { "type": "geoshape", "fill": "lightgray", "stroke": "white" }
		},
		{
			"data": {
				"url": "https://raw.githubusercontent.com/KaneSec/vega_lite/main/3_choropleth_map/js/ne_110m_admin_0_countries.topojson",
				"format": {
					"type": "topojson",
					"feature": "ne_110m_admin_0_countries"
				}
			},
			"transform": [
				{
					"lookup": "properties.NAME",
					"from": {
						"data": {
							"url": "https://raw.githubusercontent.com/Tzyinggggggg/3179_Assignment2/main/Data/world-data-2023.csv"
						},
						"key": "Country",
						"fields": ["Density"]
					}
				},
				{ "calculate": "datum.Density + 0", "as": "Density" }
			],
			"mark": { "type": "geoshape" },
			"encoding": {
				"color": {
					"field": "Density",
					"type": "quantitative",
					"scale": {
						"type": "threshold",
						"domain": [20, 100, 200, 300, 700, 1000, 2000],
						"range": [
							"#c9e52f",
							"#a6d75b",
							"#76c68f",
							"#48b5c4",
							"#22a7f0",
							"#1984c5",
							"#115f9a"
						]
					},
					"legend": {
						"orient": "bottom-right",
						"direction": "horizontal",
						"labelColor": "#73606c",
						"titleColor": "#73606c"
					}
				},
				"tooltip": [
					{ "field": "properties.NAME", "type": "nominal", "title": "Country" },
					{ "field": "Density", "type": "quantitative" }
				]
			}
		}
	],
	"config": { "view": { "stroke": "transparent" } }
}
