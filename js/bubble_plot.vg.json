{
	"width": 1000,
	"height": 600,
	"$schema": "https://vega.github.io/schema/vega-lite/v5.json",
	"description": "BUBBLEPLOT",
	"data": {
		"url": "https://raw.githubusercontent.com/Tzyinggggggg/3179_Assignment2/main/Data/GDP-with-continent.csv"
	},
	"params": [
		{
			"name": "Population_Above",
			"value": 0,
			"bind": {
				"input": "range",
				"min": 0,
				"max": 100000000,
				"step": 1000000,
				"name": "Minimum Population: "
			}
		},
		{
			"name": "Continent_selection",
			"bind": {
				"input": "select",
				"options": [
					null,
					"North America",
					"South America",
					"Europe",
					"Africa",
					"Asia",
					"Oceania"
				],
				"labels": [
					"Show All",
					"North America",
					"South America",
					"Europe",
					"Africa",
					"Asia",
					"Oceania"
				],
				"name": "Continent Selection: "
			}
		}
	],
	"transform": [
		{ "filter": "datum.Continent != ''" },
		{ "filter": "datum.GDP_per_Capita > 0" },
		{ "filter": "datum.Life_Expectancy > 0" },
		{
			"filter": "Continent_selection == null || datum.Continent == Continent_selection"
		},
		{ "filter": "datum.Population > Population_Above" }
	],
	"encoding": {
		"x": {
			"field": "Life_Expectancy",
			"type": "quantitative",
			"scale": { "type": "log", "domain": [50, 100] },
			"title": "Life Expectancy",
			"axis": { "tickCount": 6, "labelFontSize": 15, "titleFontSize": 20 }
		},
		"y": {
			"field": "GDP_per_Capita",
			"type": "quantitative",
			"scale": { "type": "log", "domain": [200, 200000] },
			"title": "GDP per Capita",
			"axis": { "tickCount": 6, "labelFontSize": 15, "titleFontSize": 20 }
		}
	},
	"layer": [
		{
			"selection": {
				"continent_highlight": {
					"type": "multi",
					"fields": ["Continent"],
					"bind": "legend"
				}
			},
			"mark": { "type": "circle", "stroke": "black", "strokeWidth": 0.5 },
			"encoding": {
				"size": {
					"field": "Population",
					"type": "quantitative",
					"scale": {
						"type": "threshold",
						"domain": [10000000, 100000000, 300000000, 700000000, 800000000],
						"range": [200, 400, 800, 1200, 1600, 2500]
					},
					"format": ",",
					"title": "Population",
					"legend": {
						"format": ",.2s",
						"labelFontSize": 15,
						"titleFontSize": 20
					}
				},
				"color": {
					"field": "Continent",
					"type": "nominal",
					"title": "Continent",
					"legend": {
						"title": "Continent",
						"labelFontSize": 15,
						"titleFontSize": 20
					}
				},
				"opacity": {
					"condition": { "selection": "continent_highlight", "value": 1 },
					"value": 0.2
				},
				"tooltip": [
					{ "field": "Country", "type": "nominal", "title": "Country" },
					{ "field": "Continent", "type": "nominal", "title": "Continent" },
					{
						"field": "Population",
						"type": "quantitative",
						"format": ",",
						"title": "Population"
					},
					{
						"field": "Life_Expectancy",
						"type": "quantitative",
						"format": ",",
						"title": "Life_Expectancy"
					},
					{
						"field": "GDP_per_Capita",
						"type": "quantitative",
						"format": ",",
						"title": "GDP per Capita"
					}
				]
			}
		},
		{
			"mark": {
				"type": "text",
				"align": "center",
				"baseline": "middle",
				"dy": 10,
				"fontSize": 15,
				"fontStyle": "bolder"
			},
			"encoding": {
				"text": { "field": "location", "type": "nominal" },
				"color": { "value": "black" },
				"opacity": {
					"condition": {
						"test": "datum.location == 'China' || datum.location == 'Singapore' || datum.location == 'Australia' || datum.location == 'New Zealand' || datum.location == 'Malaysia' || datum.location == 'United Kingdom' ||  datum.location == 'United States'",
						"value": 1
					},
					"value": 0
				}
			}
		}
	],
	"config": {}
}
